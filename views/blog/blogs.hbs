{{#each article}}
<section class="field">
  <div class="card">
    <div class="card-content">
      <div class="media">
        <div class="media-left">
            
          <figure class="image is-48x48">
            {{!-- <img src="https://loremflickr.com/320/240?random={{id}}" /> --}}
          </figure>
        </div>
        <div class="media-content">
          <a href="/blogs/{{id}}">
              <p class="title is-4">{{tittle}}</p>
          </a>
        </div>
        
        
        
      </div>

      <div class="content">
        {{content}}
      </div>
      
      <span class="tag is-rounded">Author ğŸ‘‰ğŸ¼ {{author.name}}</span>
      {{#if published}}
        <span class="tag is-primary is-rounded">Published</span>
        {{else}}
        {{!-- <span class="tag is-rounded is-warning">Draft</span> --}}
        <span class="tag is-warning is-rounded">Draft</span>
      {{/if}}
      <br>
      <br>
      <div class="buttons is-right">
        {{!-- <a>
          <button class="button is-link" id="publish">
              <span>Publish</span>
          </button>
        </a> --}}
        <a href="/blogs/update/{{id}}">
          <button class="button is-primary">
              <span>Edit ğŸ“</span>
          </button>
        </a>
      </div>
      
    </div>
  </div>
</section>

<script>
  //const blog = document.querySelector('form')
  const publish = document.getElementById("publish")
    
    publish.addEventListener("click", (e) => {
      e.preventDefault()
      //alert('publish')
      
      const pub = fetch("/blogs/publish/{{id}}", {
        method: 'PATCH',
        headers: { 
                "Content-Type": "application/json"
            }
      })
      const data = pub.json()
      if(data) {
        location.assign('/')
      }
    })
</script>

{{/each}}


